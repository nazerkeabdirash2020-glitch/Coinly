let storyText = document.getElementById("storyText");
let playBtn = document.getElementById("playBtn");
let nextBtn = document.getElementById("nextBtn");
let choice1 = null; // "A" –∏–ª–∏ "B"
let choice2 = null; 
let story = [];
let currentExtraStory = null;
let extraIndex = 0;
let verbs = {};


function createStory() {
    return [

`–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–≥—Ä—ã:
\n–ó–Ω–∞—á–µ–Ω–∏–µ
\nüí∞ –ö–∞–ø–∏—Ç–∞–ª 500 $ —Ñ—Ñ—Ñ
\nüò∞ –°—Ç—Ä–µ—Å—Å 0 %
\n‚≠ê –†–µ–ø—É—Ç–∞—Ü–∏—è 0 (–Ω–µ–π—Ç—Ä–∞–ª—å–Ω–∞—è)
\nüìò –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç—å 0 / 100
\nüï≥ –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ 0`,

`–ò–≥—Ä–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è...`,

`–í–∞–º 19.
–í—á–µ—Ä–∞ –≤—ã –ø–æ–ª—É—á–∏–ª–∏ –∞—Ç—Ç–µ—Å—Ç–∞—Ç, –∞ —Å–µ–≥–æ–¥–Ω—è ‚Äî –ø–µ—Ä–≤—É—é —Å–≤–æ–±–æ–¥—É.
–ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≥–æ–¥ –≤—ã —É—Å–ø–µ–ª–∏ –ø–æ—Ä–∞–±–æ—Ç–∞—Ç—å –æ—Ñ–∏—Ü–∏–∞–Ω—Ç–æ–º, –Ω–∞—É—á–∏–ª–∏—Å—å —É–ª—ã–±–∞—Ç—å—Å—è, –¥–∞–∂–µ –∫–æ–≥–¥–∞ –Ω–µ —Ö–æ—á–µ—Ç—Å—è, –∏ –æ—Ç–∫–ª–∞–¥—ã–≤–∞—Ç—å –¥–µ–Ω—å–≥–∏, –æ—Ç–∫–∞–∑—ã–≤–∞—è —Å–µ–±–µ –≤ –º–µ–ª–æ—á–∞—Ö.

–ù–∞ –≤–∞—à–µ–º —Å—á–µ—Ç—É ‚Äî 500 –¥–æ–ª–ª–∞—Ä–æ–≤.
–ù–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –Ω–æ –∏ –Ω–µ –Ω–æ–ª—å.

–í—ã —Å—Ç–∞–≤–∏—Ç–µ —Å–µ–±–µ —Ü–µ–ª—å:
–∫ 22 –≥–æ–¥–∞–º –Ω–µ –∑–∞–≤–∏—Å–µ—Ç—å –Ω–∏ –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª–µ–π, –Ω–∏ –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–π —Ä–∞–±–æ—Ç—ã.

–ü–æ–∫–∞ —ç—Ç–æ –∑–≤—É—á–∏—Ç –∫–∞–∫ –ø–ª–∞–Ω.
–û—á–µ–Ω—å —Å–∫–æ—Ä–æ —ç—Ç–æ —Å—Ç–∞–Ω–µ—Ç –∏—Å–ø—ã—Ç–∞–Ω–∏–µ–º`,
`–í—ã –∑–∞–∫—Ä—ã–≤–∞–µ—Ç–µ –¥–Ω–µ–≤–Ω–æ–π —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å –≤ –º–∞–ª–µ–Ω—å–∫–æ–º, —à—É–º–Ω–æ–º –∫–∞—Ñ–µ. –°–ª—ã—à–Ω–æ, –∫–∞–∫ –ø–æ—Å—É–¥–∞ –±—å—ë—Ç—Å—è, –º—É–∑—ã–∫–∞ –∏–≥—Ä–∞–µ—Ç —Ç–∏—Ö–æ –Ω–∞ —Ñ–æ–Ω–µ. –í—ã —Å–æ–±–∏—Ä–∞–µ—Ç–µ –ø–æ–¥–Ω–æ—Å—ã –∏ –∑–∞–º–µ—Ç–∫–∏, –∫–æ–≥–¥–∞ —É–ø—Ä–∞–≤–ª—è—é—â–∏–π ‚Äî —Å—Ç—Ä–æ–≥–∏–π, –Ω–æ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ã–π —á–µ–ª–æ–≤–µ–∫ —Å –∞–∫–∫—É—Ä–∞—Ç–Ω–æ–π —Ä—É–±–∞—à–∫–æ–π –∏ —É—Å—Ç–∞–ª—ã–º –≤–∑–≥–ª—è–¥–æ–º ‚Äî –ø–æ–¥—Ö–æ–¥–∏—Ç –∫ –≤–∞–º.`,
`–£–ø—Ä–∞–≤–ª—è—é—â–∏–π: "–≠–π, —Å–ª—É—à–∞–π, —É –º–µ–Ω—è –µ—Å—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ. –ù–æ—á–Ω—ã–µ —Å–º–µ–Ω—ã‚Ä¶ –¢—ã –∑–Ω–∞–µ—à—å, —Å –Ω–∏–º–∏ –ø–ª–∞—Ç–∞ –≤—ã—à–µ. –ù–∞–º–Ω–æ–≥–æ –≤—ã—à–µ."`,
`–ù–æ—á–Ω—ã–µ —Å–º–µ–Ω—ã‚Ä¶ –ë–æ–ª—å—à–µ –¥–µ–Ω–µ–≥, –¥–∞, –Ω–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç –º–µ–Ω—å—à–µ —Å–Ω–∞, –±–æ–ª—å—à–µ —É—Å—Ç–∞–ª–æ—Å—Ç–∏‚Ä¶`,
`–£–ø—Ä–∞–≤–ª—è—é—â–∏–π: "–Ø –≤–∏–∂—É, —á—Ç–æ —Ç—ã —Å—Ç–∞—Ä–∞–µ—à—å—Å—è. –ü–æ–¥—É–º–∞–π –æ–± —ç—Ç–æ–º. –ù–æ—á–Ω—ã–µ —Å–º–µ–Ω—ã –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ —Ö–æ—á–µ—Ç –±—ã—Å—Ç—Ä–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—å—Å—è. –í –∫–æ–Ω—Ü–µ –∫–æ–Ω—Ü–æ–≤, –¥–µ–Ω—å–≥–∏ –Ω–µ –ª—é–±—è—Ç –∂–¥–∞—Ç—å."`,
`–í—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç–µ —Å–µ–±–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–Ω—å–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –æ—Ç–∫–ª–∞–¥—ã–≤–∞—Ç—å –Ω–∞ —É—á–µ–±—É, –Ω–∞ –º–µ—á—Ç—É –∏–ª–∏ –Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –±–∏–∑–Ω–µ—Å. –ù–æ –≤–º–µ—Å—Ç–µ —Å —ç—Ç–∏–º –ø—Ä–∏—Ö–æ–¥—è—Ç —É—Å—Ç–∞–ª–æ—Å—Ç—å, —Å–æ–Ω–ª–∏–≤–æ—Å—Ç—å, –º–µ–Ω—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –¥—Ä—É–∑–µ–π –∏ —Å–µ–±—è.`,
`–°–∫–æ–ª—å–∫–æ —è ${verbs.ready} –æ—Ç–¥–∞—Ç—å —Å–µ–π—á–∞—Å —Ä–∞–¥–∏ –±—É–¥—É—â–µ–≥–æ? –ß–µ—Å—Ç–Ω–æ‚Ä¶ –º–æ–≥—É –ª–∏ —è –≤—ã–¥–µ—Ä–∂–∞—Ç—å —ç—Ç–æ?`

    ];
}

function showStatNotification(text) {
    let notif = document.getElementById('statNotification');
    notif.textContent = text;
    notif.style.display = 'block';

    // –ó–∞–º–µ–Ω—è–µ–º –ø–µ—Ä–µ–Ω–æ—Å—ã `\n` –Ω–∞ HTML <br>
    notif.innerHTML = text.replace(/\n/g, "<br>");


    setTimeout(() => {
        notif.style.display = 'none';
    }, 5000); // —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏—Å—á–µ–∑–∞–µ—Ç —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥—ã
}

nextBtn.addEventListener("click", () => {
    if (isTyping) return;

    // –µ—Å–ª–∏ –º—ã –≤ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –≤–µ—Ç–∫–µ –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞
    if (currentExtraStory) {
        currentExtraStory.index++;  // –∏—Å–ø–æ–ª—å–∑—É–µ–º index –∏–∑ –æ–±—ä–µ–∫—Ç–∞

        if (currentExtraStory.index < currentExtraStory.array.length) {
            typeText(currentExtraStory.array[currentExtraStory.index]);
        } else {
            // –≤–µ—Ç–∫–∞ –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å
            const callback = currentExtraStory.callback;
            currentExtraStory = null;
            
            if (callback) {
                callback(); // –≤—ã–ø–æ–ª–Ω—è–µ–º callback
            } else {
                nextBtn.style.display = "none";
            }
        }
        return;
    }
    
    // –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥...
});
/*
    if (index === storyAfterChoiceA.length + 9 && choice1 === "A") {
        typeNextArray(storyBeforeChoice2, () => {
            showChoice2();
        });
        index++; // —á—Ç–æ–±—ã —ç—Ç–æ —Å—Ä–∞–±–æ—Ç–∞–ª–æ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
        return;
    }

    if (index === storyAfterChoiceB.length + 9 && choice1 === "B") {
        typeNextArray(storyBeforeChoice2, () => {
            showChoice2();
        });
        index++;
        return;
    }


    // –æ–±—ã—á–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è
    index++;
    if (index < story.length) {
        typeText(story[index]);
    } else {
        nextBtn.style.display = "none";
    }
});


const storyBeforeChoice2 = [
`–í –æ–¥–∏–Ω –∏–∑ –≤–µ—á–µ—Ä–æ–≤ –≤—ã –≤—Å—Ç—Ä–µ—á–∞–µ—Ç–µ—Å—å —Å –¥—Ä—É–∑—å—è–º–∏.
–†–∞–∑–≥–æ–≤–æ—Ä –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –ª–µ–≥–∫–æ ‚Äî —Ä–∞–±–æ—Ç–∞, —É—Å—Ç–∞–ª–æ—Å—Ç—å, —Ü–µ–Ω—ã.`,

`–ü–æ—Ç–æ–º —Ç–µ–º–∞ –Ω–µ–∑–∞–º–µ—Ç–Ω–æ —Å–º–µ—â–∞–µ—Ç—Å—è –∫ –¥–µ–Ω—å–≥–∞–º.`,

`–û–¥–∏–Ω –∏–∑ –¥—Ä—É–∑–µ–π –≤–¥—Ä—É–≥ –≥–æ–≤–æ—Ä–∏—Ç:
‚Äî –Ø —Ç—É—Ç –ø–æ–¥—É–º–∞–ª‚Ä¶ –∞ —á—Ç–æ –µ—Å–ª–∏ –Ω–∞–º –æ—Ç–∫—Ä—ã—Ç—å –Ω–µ–±–æ–ª—å—à–æ–π –±–∏–∑–Ω–µ—Å –≤–º–µ—Å—Ç–µ?
–ù–∏—á–µ–≥–æ –≥—Ä–∞–Ω–¥–∏–æ–∑–Ω–æ–≥–æ. –ü—Ä–æ—Å—Ç–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å.`,

`–û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –∏–¥–µ—é –∏ –ø–µ—Ä–µ–≥–ª—è–¥—ã–≤–∞—é—Ç—Å—è.
–ü–æ—Ç–æ–º –≤—Å–µ —Å–º–æ—Ç—Ä—è—Ç –Ω–∞ –≤–∞—Å.`,

`–í—ã –ø–æ–Ω–∏–º–∞–µ—Ç–µ:
–¥–µ–ª–æ –Ω–µ —Ç–æ–ª—å–∫–æ –≤ –¥–µ–Ω—å–≥–∞—Ö.
–≠—Ç–æ –ø—Ä–æ –¥–æ–≤–µ—Ä–∏–µ –∏ –æ–±—â–∏–π —Ä–∏—Å–∫.`
];

*/
function showChoice2() {
    nextBtn.style.display = "none";

    const choiceText = `
–†–∏—Å–∫–Ω—É—Ç—å –≤–º–µ—Å—Ç–µ —Å –¥—Ä—É–∑—å—è–º–∏ ‚Äî
–∏–ª–∏ –æ—Å—Ç–∞—Ç—å—Å—è –≤ —Å—Ç–æ—Ä–æ–Ω–µ?
`;

    typeText(choiceText, () => {
        const container = document.createElement("div");
        container.style.display = "flex";
        container.style.gap = "15px";
        container.style.marginTop = "15px";

        const btnA = document.createElement("button");
        btnA.textContent = "–í–ª–æ–∂–∏—Ç—å—Å—è –≤ –±–∏–∑–Ω–µ—Å";
        btnA.onclick = () => {
            container.remove();
            choice2 = "A";

            // –±–∞–∑–æ–≤—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è
            money -= 200;
            reputation += 10;
            knowledge += 5;
            updateStats();

            showStatNotification(`üí∞ -200 $\n‚≠ê +10 –†–µ–ø—É—Ç–∞—Ü–∏—è\nüìò +5 –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç—å`);

            // üé≤ –†–ê–ù–î–û–ú - –ë–ï–ó setTimeout —Å–æ —Å—Ç—Ä–æ–∫–æ–π
            const handleBusinessResult = () => {
                const success = Math.random() < 0.5;

                if (success) {
                    money += 300;
                    updateStats();
                    showStatNotification(`üéâ –ë–∏–∑–Ω–µ—Å –≤—ã—Å—Ç—Ä–µ–ª–∏–ª!\nüí∞ +300 $`);
                } else {
                    money -= 200;

                    let extraText = `üí∏ –ë–∏–∑–Ω–µ—Å –ø—Ä–æ–≤–∞–ª–∏–ª—Å—è\nüí∞ -200 $`;

                    // ‚ö†Ô∏è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä–µ—Å—Å–∞
                    if (stress >= 20) {
                        reputation -= 10;
                        extraText += `\n‚≠ê -10 –†–µ–ø—É—Ç–∞—Ü–∏—è (—Å—Ç—Ä–µ—Å—Å —Å—ã–≥—Ä–∞–ª –ø—Ä–æ—Ç–∏–≤ –≤–∞—Å)`;
                    }

                    updateStats();
                    showStatNotification(extraText);
                }

                nextBtn.style.display = "inline-block";
            };

            // –ò—Å–ø–æ–ª—å–∑—É–µ–º setTimeout —Å —Ñ—É–Ω–∫—Ü–∏–µ–π, –∞ –Ω–µ —Å—Ç—Ä–æ–∫–æ–π
            setTimeout(handleBusinessResult, 800);
        };

        const btnB = document.createElement("button");
        btnB.textContent = "–û—Ç–∫–∞–∑–∞—Ç—å—Å—è";
        btnB.onclick = () => {
            container.remove();
            choice2 = "B";

            reputation -= 5;
            stress -= 5;
            if (stress < 0) stress = 0;

            updateStats();

            showStatNotification(`‚≠ê -5 –†–µ–ø—É—Ç–∞—Ü–∏—è\nüòå -5% –°—Ç—Ä–µ—Å—Å`);
            nextBtn.style.display = "inline-block";
        };

        container.appendChild(btnA);
        container.appendChild(btnB);
        storyText.appendChild(container);
    });
}
/*
function continueAfterChoice() {
   startExtraStory(storyBeforeChoice2, () => {
   showChoice2();
    });
}
*/

function showChoice1() {
    nextBtn.style.display = "none";

    const choiceText = `
–†–∞–±–æ—Ç–∞ –æ—Ñ–∏—Ü–∏–∞–Ω—Ç–æ–º –¥–∞—ë—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å, –Ω–æ –¥–µ–Ω—å–≥–∏ —É—Ö–æ–¥—è—Ç –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º –ø—Ä–∏—Ö–æ–¥—è—Ç.
–£–ø—Ä–∞–≤–ª—è—é—â–∏–π –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –Ω–æ—á–Ω—ã–µ —Å–º–µ–Ω—ã: –±–æ–ª—å—à–µ –¥–µ–Ω–µ–≥, –Ω–æ –±–æ–ª—å—à–µ —É—Å—Ç–∞–ª–æ—Å—Ç–∏.
(–í–∞—à–∏ –≤—ã–±–æ—Ä—ã –º–æ–≥—É—Ç –∏–º–µ—Ç—å –∫–∞–∫ –ø–ª—é—Å—ã, —Ç–∞–∫ –∏ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è. –û–Ω–∏ –ø–æ–≤–ª–∏—è—é—Ç –Ω–∞ –±—É–¥—É—â–µ–µ ‚Äî –≤—ã–±–∏—Ä–∞–π—Ç–µ —Å —É–º–æ–º.)
`;

    // –ø–µ—á–∞—Ç–∞–µ–º —Ç–µ–∫—Å—Ç –≤—ã–±–æ—Ä–∞
typeText(choiceText, () => {
    // —Å–æ–∑–¥–∞—ë–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–Ω–æ–ø–æ–∫
    const container = document.createElement("div");
    container.style.display = "flex";
    container.style.gap = "15px";
    container.style.marginTop = "15px";

    // –∫–Ω–æ–ø–∫–∞ A
    const btnA = document.createElement("button");
    btnA.textContent = "–í–∑—è—Ç—å –≤—Ç–æ—Ä—É—é —Ä–∞–±–æ—Ç—É";
    btnA.onclick = () => {
        choice1 = "A";
        money += 300;
        stress += 20;
        updateStats();

        // –ü–µ—Ä–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å—Ä–∞–∑—É
        showStatNotification(`üí∞+300 $\nüò∞+20% –°—Ç—Ä–µ—Å—Å`);

        container.remove(); // —É–±–∏—Ä–∞–µ–º –∫–Ω–æ–ø–∫–∏

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é —Å callback
        startExtraStory(storyAfterChoiceA, () => {
        showChoice2();
    });
    };

    // ‚Üê –ó–ê–ö–†–´–¢–¨ —Ñ–∏–≥—É—Ä–Ω—É—é —Å–∫–æ–±–∫—É btnA.onclick


        // –∫–Ω–æ–ø–∫–∞ B
        const btnB = document.createElement("button");
        btnB.textContent = "–û—Å—Ç–∞–≤–∏—Ç—å –æ–¥–Ω—É —Ä–∞–±–æ—Ç—É";
        btnB.onclick = () => {
            choice1 = "B";
            money += 150;
            stress += 5;
            knowledge += 5;
            updateStats();
                showStatNotification(`üí∞+150 $\nüò∞+5% –°—Ç—Ä–µ—Å—Å\nüìò+5 —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç–∏`);
            container.remove(); // —É–±–∏—Ä–∞–µ–º –∫–Ω–æ–ø–∫–∏

        startExtraStory(storyAfterChoiceB, () => {
        showChoice2();
    });

    };

        container.appendChild(btnA);
        container.appendChild(btnB);
        storyText.appendChild(container);
    }
    )};

function startExtraStory(arr, onFinish) {
    currentExtraStory = {
        array: arr,           // —Å–æ—Ö—Ä–∞–Ω—è–µ–º –º–∞—Å—Å–∏–≤
        callback: onFinish,   // —Å–æ—Ö—Ä–∞–Ω—è–µ–º callback
        index: 0              // –∏–Ω–¥–µ–∫—Å –≤–Ω—É—Ç—Ä–∏ –º–∞—Å—Å–∏–≤–∞
    };
    
    extraIndex = 0;  // —ç—Ç–æ –º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å, –∏—Å–ø–æ–ª—å–∑—É–µ–º currentExtraStory.index
    nextBtn.style.display = "none";
    typeText(currentExtraStory.array[extraIndex]);  // –∏–ª–∏ currentExtraStory.array[currentExtraStory.index]
}

function typeNextArray(arr, callback) {
    let i = 0;
    nextBtn.style.display = "none";

    function nextLine() {
        if (i < arr.length) {
            typeText(arr[i], () => {
                i++;
                nextLine();
            });
        } else {
            if (callback) callback();
            else nextBtn.style.display = "inline-block";
        }
    }

    nextLine();
}


const storyAfterChoiceB = [
    `–í—ã –º–µ–¥–ª–∏—Ç–µ —Å –æ—Ç–≤–µ—Ç–æ–º. –°–ª–∏—à–∫–æ–º —Ö–æ—Ä–æ—à–æ –∑–Ω–∞–µ—Ç–µ, —á–µ–º –º–æ–∂–µ—Ç –∑–∞–∫–æ–Ω—á–∏—Ç—å—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è —É—Å—Ç–∞–ª–æ—Å—Ç—å.`,

`‚Äî –°–ø–∞—Å–∏–±–æ, –Ω–æ‚Ä¶ –ø–æ–∫–∞ —è –æ—Å—Ç–∞–Ω—É—Å—å –Ω–∞ –¥–Ω–µ–≤–Ω—ã—Ö —Å–º–µ–Ω–∞—Ö.
–ú–Ω–µ –≤–∞–∂–Ω–æ –Ω–µ –ø–µ—Ä–µ–≥–æ—Ä–µ—Ç—å.`,
`–£–ø—Ä–∞–≤–ª—è—é—â–∏–π –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ —Ç–µ–±—è, –∑–∞—Ç–µ–º –ø–æ–∂–∏–º–∞–µ—Ç –ø–ª–µ—á–∞–º–∏.`,
`–£–ø—Ä–∞–≤–ª—è—é—â–∏–π:
‚Äî –†–∞–∑—É–º–Ω—ã–π –ø–æ–¥—Ö–æ–¥. –ù–µ –≤—Å–µ —ç—Ç–æ –ø–æ–Ω–∏–º–∞—é—Ç.
–ï—Å–ª–∏ –ø–µ—Ä–µ–¥—É–º–∞–µ—à—å ‚Äî –∑–Ω–∞–µ—à—å, –≥–¥–µ –º–µ–Ω—è –Ω–∞–π—Ç–∏.`,
`–û–Ω —É—Ö–æ–¥–∏—Ç. –í—ã —á—É–≤—Å—Ç–≤—É–µ—Ç–µ –ª—ë–≥–∫–æ–µ –æ–±–ª–µ–≥—á–µ–Ω–∏–µ‚Ä¶
–∏ —Ç–∏—Ö–∏–π –≤–æ–ø—Ä–æ—Å –≤–Ω—É—Ç—Ä–∏:
–∞ –Ω–µ —É–ø—É—Å–∫–∞—é –ª–∏ —è —à–∞–Ω—Å?`,
    `–¢–µ–º –≤—Ä–µ–º–µ–Ω–µ–º –¥–Ω–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç —Ä–∞–∑–º–µ—Ä–µ–Ω–Ω–æ. –î–Ω–µ–≤–Ω—ã–µ —Å–º–µ–Ω—ã –æ—Å—Ç–∞–≤–ª—è—é—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –∫–Ω–∏–≥ –∏ –∑–∞–º–µ—Ç–æ–∫, –∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –≤—ã –Ω–∞—á–∏–Ω–∞–µ—Ç–µ –ø–æ–Ω–∏–º–∞—Ç—å –æ—Å–Ω–æ–≤—ã —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç–∏. –î–∞–∂–µ –±–µ–∑ –¥–æ—Ä–æ–≥–∏—Ö –∫—É—Ä—Å–æ–≤, –º–∞–ª–µ–Ω—å–∫–∏–µ —à–∞–≥–∏ –∫ –∑–Ω–∞–Ω–∏—è–º –ø—Ä–∏–Ω–æ—Å—è—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –∏ –æ—â—É—â–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ –±—É–¥—É—â–∏–º‚Ä¶`,
`–í –æ–¥–∏–Ω –∏–∑ –≤–µ—á–µ—Ä–æ–≤, –∫–æ–≥–¥–∞ –≤—ã —Å–∫–ª–∞–¥—ã–≤–∞–ª–∏ –ø–æ–¥–Ω–æ—Å—ã, –ø–æ–¥–æ—à—ë–ª –≤–∞—à –∫–æ–ª–ª–µ–≥–∞. "–°–ª—É—à–∞–π, —è –≤–∏–∂—É, —á—Ç–æ —Ç—ã —Ä–µ–∞–ª—å–Ω–æ –≤–Ω–∏–∫–∞–µ—à—å –≤ —Ñ–∏–Ω–∞–Ω—Å—ã. –î–∞–∂–µ –±–µ–∑ –∫—É—Ä—Å–æ–≤, –∞ –ø—Ä–æ—Å—Ç–æ –∏–∑—É—á–∞—è —Å–∞–º, —É–∂–µ –º–Ω–æ–≥–æ–µ –ø–æ–Ω–∏–º–∞–µ—à—å."`,
`–í—ã —É–ª—ã–±–Ω—É–ª–∏—Å—å. "–î–∞, —Å—Ç–∞—Ä–∞—é—Å—å —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è. –ü–æ–∫–∞ –Ω–µ –º–æ–≥—É –ø–æ–∑–≤–æ–ª–∏—Ç—å —Å–µ–±–µ –∫—É—Ä—Å—ã, –Ω–æ –≤—Å—ë —Ä–∞–≤–Ω–æ —É—á—É—Å—å –∏ –ø–ª–∞–Ω–∏—Ä—É—é –±—É–¥—É—â–µ–µ."`,
`–í–µ—á–µ—Ä–∞ —Ç–µ–ø–µ—Ä—å –ø—Ä–æ—Ö–æ–¥—è—Ç –∑–∞ –∫–Ω–∏–≥–∞–º–∏ –∏ –∑–∞–º–µ—Ç–∫–∞–º–∏, –∞ –Ω–µ –∑–∞ –≤—Ç–æ—Ä—ã–º–∏ —Å–º–µ–Ω–∞–º–∏. –î–µ–Ω—å–≥–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç –º–µ–¥–ª–µ–Ω–Ω–µ–µ, –Ω–æ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –≤–∞–∂–Ω—ã–µ –Ω–∞–≤—ã–∫–∏ –∏ –∑–Ω–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –ø–æ–ª–µ–∑–Ω—ã –≤ –±—É–¥—É—â–µ–º. –í—Ä–µ–º—è, –∫–æ—Ç–æ—Ä–æ–µ –≤—ã —Å—ç–∫–æ–Ω–æ–º–∏–ª–∏ –Ω–∞ –æ—Ç–¥—ã—Ö–µ –∏ —Å–∞–º–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏, –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –ø—Ä–æ—á–Ω—É—é –±–∞–∑—É –¥–ª—è –≤–∞—à–∏—Ö —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Ü–µ–ª–µ–π.`,
`–í –æ–¥–∏–Ω –∏–∑ –≤–µ—á–µ—Ä–æ–≤ –≤—ã –≤—Å—Ç—Ä–µ—á–∞–µ—Ç–µ—Å—å —Å –¥—Ä—É–∑—å—è–º–∏.
–†–∞–∑–≥–æ–≤–æ—Ä –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –ª–µ–≥–∫–æ ‚Äî —Ä–∞–±–æ—Ç–∞, —É—Å—Ç–∞–ª–æ—Å—Ç—å, —Ü–µ–Ω—ã.`,

`–ü–æ—Ç–æ–º —Ç–µ–º–∞ –Ω–µ–∑–∞–º–µ—Ç–Ω–æ —Å–º–µ—â–∞–µ—Ç—Å—è –∫ –¥–µ–Ω—å–≥–∞–º.`,

`–û–¥–∏–Ω –∏–∑ –¥—Ä—É–∑–µ–π –≤–¥—Ä—É–≥ –≥–æ–≤–æ—Ä–∏—Ç:
‚Äî –Ø —Ç—É—Ç –ø–æ–¥—É–º–∞–ª‚Ä¶ –∞ —á—Ç–æ –µ—Å–ª–∏ –Ω–∞–º –æ—Ç–∫—Ä—ã—Ç—å –Ω–µ–±–æ–ª—å—à–æ–π –±–∏–∑–Ω–µ—Å –≤–º–µ—Å—Ç–µ?
–ù–∏—á–µ–≥–æ –≥—Ä–∞–Ω–¥–∏–æ–∑–Ω–æ–≥–æ. –ü—Ä–æ—Å—Ç–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å.`,

`–û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –∏–¥–µ—é –∏ –ø–µ—Ä–µ–≥–ª—è–¥—ã–≤–∞—é—Ç—Å—è.
–ü–æ—Ç–æ–º –≤—Å–µ —Å–º–æ—Ç—Ä—è—Ç –Ω–∞ –≤–∞—Å.`,

`–í—ã –ø–æ–Ω–∏–º–∞–µ—Ç–µ:
–¥–µ–ª–æ –Ω–µ —Ç–æ–ª—å–∫–æ –≤ –¥–µ–Ω—å–≥–∞—Ö.
–≠—Ç–æ –ø—Ä–æ –¥–æ–≤–µ—Ä–∏–µ –∏ –æ–±—â–∏–π —Ä–∏—Å–∫.`
];

const storyAfterChoiceA = [
    `–í—ã –Ω–∞ —Å–µ–∫—É–Ω–¥—É –∑–∞–¥–µ—Ä–∂–∏–≤–∞–µ—Ç–µ –≤–∑–≥–ª—è–¥ –Ω–∞ —Å–≤–æ–∏—Ö —Ä—É–∫–∞—Ö ‚Äî —É—Å—Ç–∞–≤—à–∏—Ö, –ø–∞—Ö–Ω—É—â–∏—Ö –∫–æ—Ñ–µ –∏ –º–æ—é—â–∏–º —Å—Ä–µ–¥—Å—Ç–≤–æ–º.
–ü–æ—Ç–æ–º –≤—ã–¥—ã—Ö–∞–µ—Ç–µ –∏ –ø–æ–¥–Ω–∏–º–∞–µ—Ç–µ –≥–ª–∞–∑–∞.`,

`‚Äî –õ–∞–¥–Ω–æ‚Ä¶ –Ø –≤–æ–∑—å–º—É –Ω–æ—á–Ω—ã–µ —Å–º–µ–Ω—ã.
–ï—Å–ª–∏ —É–∂ –∏–¥—Ç–∏ –≤–ø–µ—Ä—ë–¥ ‚Äî —Ç–æ –±—ã—Å—Ç—Ä–æ.`,

`–£–ø—Ä–∞–≤–ª—è—é—â–∏–π —Å–ª–µ–≥–∫–∞ –∫–∏–≤–∞–µ—Ç, –±—É–¥—Ç–æ –æ–∂–∏–¥–∞–ª —ç—Ç–æ–≥–æ –æ—Ç–≤–µ—Ç–∞.`,
`–£–ø—Ä–∞–≤–ª—è—é—â–∏–π:
‚Äî –ó–Ω–∞–ª, —á—Ç–æ —Ç—ã –Ω–µ –∏–∑ —Ç–µ—Ö, –∫—Ç–æ –±–æ–∏—Ç—Å—è –Ω–∞–≥—Ä—É–∑–∫–∏.
–ì–æ—Ç–æ–≤—å—Å—è. –õ—ë–≥–∫–æ –Ω–µ –±—É–¥–µ—Ç.`,
`–û–Ω —É—Ö–æ–¥–∏—Ç, –∞ –≤ –≥—Ä—É–¥–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–Ω–æ–µ —á—É–≤—Å—Ç–≤–æ:
—Å–º–µ—Å—å —Ä–µ—à–∏–º–æ—Å—Ç–∏‚Ä¶ –∏ —Ç—Ä–µ–≤–æ–≥–∏.
–í—ã —Ç–æ–ª—å–∫–æ —á—Ç–æ –ø—Ä–æ–¥–∞–ª–∏ —Å–≤–æ—ë –≤—Ä–µ–º—è. –ù–∞–¥–µ–µ—Ç–µ—Å—å, —á—Ç–æ –Ω–µ –ø—Ä–æ–¥–µ—à–µ–≤–∏–ª–∏.`,
`–ü–µ—Ä–≤—ã–µ –¥–Ω–∏ –Ω–æ–≤–æ–π —Å–º–µ–Ω—ã –ø—Ä–æ—Ö–æ–¥—è—Ç –±—ã—Å—Ç—Ä–æ: —à—É–º –ø–æ—Å—É–¥—ã –∏ –∑–≤–æ–Ω –±–æ–∫–∞–ª–æ–≤ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –ø—Ä–∏–≤—ã—á–Ω—ã–º —Ñ–æ–Ω–æ–º. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –≤—ã –∑–∞–º–µ—á–∞–µ—Ç–µ, –∫–∞–∫ —Ä–∞—Å—Ç—ë—Ç –≤–∞—à–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—è –ø–æ–¥—É—à–∫–∞ –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Å–µ–±–µ.
–ö–∞–∂–¥–∞—è —Å–º–µ–Ω–∞ –¥–∞—ë—Ç—Å—è –Ω–µ–ø—Ä–æ—Å—Ç–æ, –Ω–æ –æ—Ç–¥–∞—á–∞ –æ—â—É—â–∞–µ—Ç—Å—è —Å –∫–∞–∂–¥—ã–º –¥–Ω—ë–º‚Ä¶`,
`–í—ã —Å–º–æ–≥–ª–∏ –ø–æ–∑–≤–æ–ª–∏—Ç—å —Å–µ–±–µ –º–µ–ª–∫–∏–µ —Ä–∞–¥–æ—Å—Ç–∏: –∫—É–ø–∏–ª–∏ –Ω–æ–≤—ã–µ –≤–µ—â–∏, –æ–±–Ω–æ–≤–∏–ª–∏ –≥–∞—Ä–¥–µ—Ä–æ–±, –∏–Ω–æ–≥–¥–∞ –±–∞–ª–æ–≤–∞–ª–∏ —Å–µ–±—è –ª—é–±–∏–º—ã–º–∏ –±–ª—é–¥–∞–º–∏. –ö–∞–∂–¥–∞—è –Ω–æ—á–Ω–∞—è —Å–º–µ–Ω–∞ –¥–∞–≤–∞–ª–∞—Å—å —Ç—Ä—É–¥–Ω–æ, –Ω–æ –≤—ã –∑–∞–º–µ—á–∞–µ—Ç–µ, –∫–∞–∫ —Ä–∞—Å—Ç—ë—Ç –≤–∞—à–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Å–µ–±–µ.`,
`–í –æ–¥–∏–Ω –∏–∑ –≤–µ—á–µ—Ä–æ–≤, –∫–æ–≥–¥–∞ –≤—ã —Å–∫–ª–∞–¥—ã–≤–∞–ª–∏ –ø–æ–¥–Ω–æ—Å—ã, —É–ø—Ä–∞–≤–ª—è—é—â–∏–π –ø–æ–¥—Ö–æ–¥–∏—Ç –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ—Ä—è–¥–æ–∫. –ï–≥–æ –≥–æ–ª–æ—Å –∑–≤—É—á–∏—Ç —Å–ø–æ–∫–æ–π–Ω–æ. "–í—ã —Å—Ç–∞—Ä–∞–µ—Ç–µ—Å—å. –ù–æ—á–Ω—ã–µ —Å–º–µ–Ω—ã —Ç—è–∂—ë–ª—ã–µ, –Ω–æ –≤—ã —Å–ø—Ä–∞–≤–ª—è–µ—Ç–µ—Å—å. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ ‚Äî –≤–∞—à–∏ —É—Å–∏–ª–∏—è –∑–∞–º–µ—Ç–Ω—ã."`,
`–í—ã —É–ª—ã–±–Ω—É–ª–∏—Å—å. "–°–ø–∞—Å–∏–±–æ, —è —Å—Ç–∞—Ä–∞—é—Å—å, —á—Ç–æ–±—ã –≤—Å—ë –ø–æ–ª—É—á–∞–ª–æ—Å—å."`,
`–ù–µ—Å–∫–æ–ª—å–∫–æ –Ω–µ–¥–µ–ª—å –ø—Ä–æ–ª–µ—Ç–µ–ª–∏ –±—ã—Å—Ç—Ä–æ. –£—Å—Ç–∞–ª–æ—Å—Ç—å –∏–Ω–æ–≥–¥–∞ –æ—â—É—â–∞–µ—Ç—Å—è, –Ω–æ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—è –ø–æ–¥—É—à–∫–∞ —Ä–∞—Å—Ç—ë—Ç, –∞ –≤–º–µ—Å—Ç–µ —Å –Ω–µ–π ‚Äî —á—É–≤—Å—Ç–≤–æ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏. –í—ã –ø–æ–Ω–∏–º–∞–µ—Ç–µ, —á—Ç–æ –≤–∞—à–∏ —É—Å–∏–ª–∏—è –¥–∞—é—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, –∏ —ç—Ç–æ –º–æ—Ç–∏–≤–∏—Ä—É–µ—Ç –¥–≤–∏–≥–∞—Ç—å—Å—è –¥–∞–ª—å—à–µ.`,
`–í –æ–¥–∏–Ω –∏–∑ –≤–µ—á–µ—Ä–æ–≤ –≤—ã –≤—Å—Ç—Ä–µ—á–∞–µ—Ç–µ—Å—å —Å –¥—Ä—É–∑—å—è–º–∏.
–†–∞–∑–≥–æ–≤–æ—Ä –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –ª–µ–≥–∫–æ ‚Äî —Ä–∞–±–æ—Ç–∞, —É—Å—Ç–∞–ª–æ—Å—Ç—å, —Ü–µ–Ω—ã.`,

`–ü–æ—Ç–æ–º —Ç–µ–º–∞ –Ω–µ–∑–∞–º–µ—Ç–Ω–æ —Å–º–µ—â–∞–µ—Ç—Å—è –∫ –¥–µ–Ω—å–≥–∞–º.`,

`–û–¥–∏–Ω –∏–∑ –¥—Ä—É–∑–µ–π –≤–¥—Ä—É–≥ –≥–æ–≤–æ—Ä–∏—Ç:
‚Äî –Ø —Ç—É—Ç –ø–æ–¥—É–º–∞–ª‚Ä¶ –∞ —á—Ç–æ –µ—Å–ª–∏ –Ω–∞–º –æ—Ç–∫—Ä—ã—Ç—å –Ω–µ–±–æ–ª—å—à–æ–π –±–∏–∑–Ω–µ—Å –≤–º–µ—Å—Ç–µ?
–ù–∏—á–µ–≥–æ –≥—Ä–∞–Ω–¥–∏–æ–∑–Ω–æ–≥–æ. –ü—Ä–æ—Å—Ç–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å.`,

`–û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –∏–¥–µ—é –∏ –ø–µ—Ä–µ–≥–ª—è–¥—ã–≤–∞—é—Ç—Å—è.
–ü–æ—Ç–æ–º –≤—Å–µ —Å–º–æ—Ç—Ä—è—Ç –Ω–∞ –≤–∞—Å.`,

`–í—ã –ø–æ–Ω–∏–º–∞–µ—Ç–µ:
–¥–µ–ª–æ –Ω–µ —Ç–æ–ª—å–∫–æ –≤ –¥–µ–Ω—å–≥–∞—Ö.
–≠—Ç–æ –ø—Ä–æ –¥–æ–≤–µ—Ä–∏–µ –∏ –æ–±—â–∏–π —Ä–∏—Å–∫.`
];



// –æ–±—ä–µ–∫—Ç –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –∏—Å—Ç–æ—Ä–∏–∏ (—á—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –≤ –±—É–¥—É—â–∏–µ –≤—ã–±–æ—Ä—ã)
/*
let storyEffects = {
    choice3Efficiency: 1, // –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å 100%
    highStressError: false
};
*/

let playerGender = ""; // "male" –∏–ª–∏ "female"
let pronouns = {};     // –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞

const genderSelection = document.getElementById("genderSelection");
const maleBtn = document.getElementById("maleBtn");
const femaleBtn = document.getElementById("femaleBtn");
let scene = document.getElementById("scene");

// –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫
maleBtn.addEventListener("click", () => setGender("male"));
femaleBtn.addEventListener("click", () => setGender("female"));

function setGender(gender) {
    playerGender = gender;

    // –∑–∞–¥–∞—ë–º –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏—è
    if (gender === "male") {
        pronouns = {
            subject: "–æ–Ω",
            object: "–µ–≥–æ",
            possessive: "–µ–≥–æ"
        };

            verbs = {
            received: "–ø–æ–ª—É—á–∏–ª",
            went: "–ø–æ—à—ë–ª",
            started: "–Ω–∞—á–∞–ª",
            uspel: "—É—Å–ø–µ–ª",
            learn: "–Ω–∞—É—á–∏–ª—Å—è",
            ready: "–≥–æ—Ç–æ–≤",
            accept: "—Å–æ–≥–ª–∞—Å–∏–ª—Å—è",
            decide: "—Ä–µ—à–∏–ª"
        };

        scene.style.backgroundImage = "url('mroom.jpeg')";
    } else {
        pronouns = {
            subject: "–æ–Ω–∞",
            object: "–µ—ë",
            possessive: "–µ—ë"
        }

        verbs = {
            received: "–ø–æ–ª—É—á–∏–ª–∞",
            went: "–ø–æ—à–ª–∞",
            started: "–Ω–∞—á–∞–ª–∞",
            uspel: "—É—Å–ø–µ–ª–∞",
            learn: "–Ω–∞—É—á–∏–ª–∞—Å—å",
            ready: "–≥–æ—Ç–æ–≤–∞",
            accept: "—Å–æ–≥–ª–∞—Å–∏–ª–∞—Å—å",
            decide: "—Ä–µ—à–∏–ª–∞"
        };

        scene.style.backgroundImage = "url('room.jpeg')";
    }

    // —Å–∫—Ä—ã–≤–∞–µ–º –≤—ã–±–æ—Ä –ø–æ–ª–∞ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–ò–≥—Ä–∞—Ç—å"
    genderSelection.style.display = "none";
    playBtn.style.display = "inline-block";

        story = createStory();
        index = 0;
}





let index = 0;
let charIndex = 0;
let isTyping = false;

// —Ñ—É–Ω–∫—Ü–∏—è –ø–µ—á–∞—Ç–∏ —Ç–µ–∫—Å—Ç–∞
function typeText(text, callback) {
    isTyping = true;
    storyText.innerHTML = "";
    charIndex = 0;
    nextBtn.style.display = "none";

    if (Array.isArray(text)) {
        text = text[0];
    }

    let interval = setInterval(() => {
        if (charIndex < text.length) {
            storyText.innerHTML += text.charAt(charIndex);
            charIndex++;
        } else {
            clearInterval(interval);
            isTyping = false;
            if (!callback) nextBtn.style.display = "inline-block"; // –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–∞–ª–µ–µ
            if (callback) callback();
        }
    }, 10);
}

// –∫–Ω–æ–ø–∫–∞ "–ò–≥—Ä–∞—Ç—å"
playBtn.addEventListener("click", () => {
    playBtn.style.display = "none";
    typeText(story[index]);
});



let money = 500;          // –∫–∞–ø–∏—Ç–∞–ª
let stress = 0;           // —Å—Ç—Ä–µ—Å—Å (0‚Äì100)
let knowledge = 0;        // —Ñ–∏–Ω. –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç—å (0‚Äì100)
let loans = 0;            // –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä–µ–¥–∏—Ç–æ–≤
let reputation = 0;

function updateStats() {
    document.getElementById("money").textContent = money;
    document.getElementById("stress").textContent = stress;
    document.getElementById("knowledge").textContent = knowledge;
    document.getElementById("loans").textContent = loans;
    document.getElementById('reputation').textContent = reputation;
}

updateStats();

function saveProgress() {
    const progress = {
        level: currentLevel,
        money: money,
        stress: stress,
        knowledge: knowledge,
        loans: loans
    };

    fetch("/saveProgress.php", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify(progress)
    })
    .then(res => res.json())
    .then(data => {
        if (data.success) console.log("–ü—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω—ë–Ω!");
    });
}


function loadProgress() {
    fetch("/loadProgress.php")
        .then(res => res.json())
        .then(data => {
            if(data.success){
                currentLevel = data.level;
                money = data.money;
                stress = data.stress;
                knowledge = data.knowledge;
                loans = data.loans;
                updateStats();
            }
        });
}

window.addEventListener("beforeunload", function (e) {
    // —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è alert –Ω–µ–ª—å–∑—è –º–µ–Ω—è—Ç—å –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö
    // –±—Ä–∞—É–∑–µ—Ä –ø–æ–∫–∞–∂–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    e.preventDefault(); // –≤–∞–∂–Ω–æ –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
    e.returnValue = ""; // –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–¥–∞—ë–º, —á—Ç–æ–±—ã —Å—Ä–∞–±–æ—Ç–∞–ª–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
});
